<?xml version="1.0" encoding="utf-8"?>
<odoo>
  <data>
    <report id="stock_picking_report" model="stock.picking" string="Stock Report" report_type="qweb-pdf" name="tsg_inventory_improves.stock_picking_report_template" file="tsg_inventory_improves.stock_picking_report_template" />
    <!--<template id="stock_report_header" inherit_id="web.internal_layout">
      <xpath expr="//div[@class='header']" position = "replace"/>
    </template>-->
    <template id="stock_picking_report_template">
      <t t-call = "web.html_container">
        <t t-call = "web.internal_layout">
          <t t-foreach="docs" t-as="o">
            <t t-set="o" t-value="o.with_context(lang=o.partner_id.lang or o.env.lang)"/>
            <t t-set="company" t-value="o.env.company"/>
            <div class="header">
              <table style = "width: 100%; height:100px; border: black 1px solid">
                <tr>
                  <td style= "padding-left: 20px; padding-top: 10px; padding-bottom: 10px">
                    <img t-if = "company.logo" t-att-src = "image_data_uri(company.logo)" alt= "Logo"/>
                  </td>
                  <td>
                    <h5 style = "font-size: 30px; align: center">Stock Report</h5>
                  </td>
                  <td>
                    <ul style = "align:center" class="list-inline">
                      <p>
                        <li class="list-inline-item">
                          <span class="page"/>
                        </li>
                        <li class="list-inline-item">/</li>
                        <li class="list-inline-item">
                          <span class="topage"/>
                        </li>
                      </p>
                      <p>
                        <li class= "list-inline-item">
                          <span t-esc="context_timestamp(datetime.datetime.now()).strftime('%Y-%m-%d %H:%M')"/>
                        </li>
                      </p>
                    </ul>
                  </td>
                </tr>
              </table>
            </div>
            <div style= "padding-bottom: 30px" class="container-fluid">
              <div class="row">
                <div class="col-7">
                  <p>
                    <span style= "font-size: 30px" t-field = "o.name"/>
                  </p>
                  <p>
                   Project:
                    <span t-field = "o.project_id"/>
                  </p>
                  <p>
                   Priority:
                    <span t-field = "o.priority"/>
                  </p>
                </div>
                <div class="col-5">
                  <p>
                    Partner:
                    <span t-field = "o.partner_id.name"/>
                  </p>
                  <p>
                     NIT:
                    <span t-field = "o.partner_id.vat"/>
                  </p>
                  <p>
                     Phone: 
                    <span t-field = "o.partner_id.phone"/>
                  </p>
                  <p>
                     Adress: 
                    <span t-field = "o.partner_id.street"/>
                    <span t-field = "o.partner_id.street2"/>
                  </p>
                </div>
              </div>
            </div>
            <table class="table">
              <thead>
                <tr>
                  <td>Product</td>
                  <td>Quantity</td>
                </tr>
              </thead>
              <tbody>
                <t t-if="o.move_line_ids_without_package">
                  <t t-foreach = "o.move_line_ids_without_package" t-as= "move_lot">
                    <tr>
                      <td>
                        <span style= "font-size: 15px" t-field = "move_lot.product_id" />
                      </td>
                      <td>
                        <span style= "font-size: 15px" t-field = "move_lot.qty_done"/>
                      </td>
                    </tr>
                  </t>  
                </t>
                <t t-if="not o.move_line_ids_without_package">
                  <t t-foreach = "o.move_ids_without_package" t-as= "move_line">
                    <t t-foreach = "move_line.move_line_nosuggest_ids" t-as= "move_lot">
                      <tr>
                        <td>
                          <span style= "font-size: 15px" t-field = "move_line.product_id" />
                        </td>
                        <td>
                          <span style= "font-size: 15px" t-field = "move_lot.qty_done"/>
                        </td>
                      </tr>
                    </t>
                  </t>  
                </t>
              </tbody>
            </table>
            <div class="footer o_background_footer din">
              <table class="text-center" style = "width: 100%; border-top: 1px solid black">
                <tr>
                  <td>
                    <span t-field= "o.env.user.company_id.website"/>&amp;bull;
                    <span t-field= "o.env.user.company_id.phone"/>&amp;bull;
                    <span t-field= "o.env.user.company_id.street"/>
                    <span t-field= "o.env.user.company_id.street2"/>
                  </td>
                </tr>
              </table>
            </div>
          </t>
        </t>
      </t>
    </template>
  </data>
   <report
        string="Picking Operations"
        id="stock.action_report_picking"
        model="stock.picking"
        report_type="qweb-pdf"
        menu= "False"
        name="stock.report_picking"
        file="stock.report_picking_operations"
        print_report_name="'Picking Operations - %s - %s' % (object.partner_id.name or '', object.name)"
      />
      <report
        string="Delivery Slip"
        id="stock.action_report_delivery"
        model="stock.picking"
        report_type="qweb-pdf"
        menu= "False"
        name="stock.report_deliveryslip"
        file="stock.report_deliveryslip"
        print_report_name="'Delivery Slip - %s - %s' % (object.partner_id.name or '', object.name)"
      />
</odoo>

